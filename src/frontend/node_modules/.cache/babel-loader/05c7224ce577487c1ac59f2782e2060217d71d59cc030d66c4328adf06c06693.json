{"ast":null,"code":"import { ref, computed, watch } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'GlobalErrorHandler',\n  setup() {\n    const store = useStore();\n    const show = ref(false);\n    const timeout = 5000;\n    const error = computed(() => store.state.error);\n    const errorMessage = computed(() => {\n      if (!error.value) return '';\n      if (error.value.response) {\n        const status = error.value.response.status;\n        const message = error.value.response.data.message;\n        switch (status) {\n          case 400:\n            return '入力内容に誤りがあります';\n          case 401:\n            return '認証に失敗しました。再度ログインしてください';\n          case 403:\n            return 'この操作を実行する権限がありません';\n          case 404:\n            return 'リソースが見つかりません';\n          case 500:\n            return 'サーバーエラーが発生しました';\n          default:\n            return message || 'エラーが発生しました';\n        }\n      }\n      return 'エラーが発生しました';\n    });\n    const errorType = computed(() => {\n      if (!error.value) return 'error';\n      if (error.value.response) {\n        const status = error.value.response.status;\n        switch (status) {\n          case 401:\n          case 403:\n            return 'warning';\n          default:\n            return 'error';\n        }\n      }\n      return 'error';\n    });\n\n    // エラーが発生したらスナックバーを表示\n    const showError = () => {\n      if (error.value) {\n        show.value = true;\n      }\n    };\n\n    // エラーの監視\n    watch(error, showError);\n    return {\n      show,\n      timeout,\n      errorMessage,\n      errorType\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","watch","useStore","name","setup","store","show","timeout","error","state","errorMessage","value","response","status","message","data","errorType","showError"],"sources":["/Users/dai/Documents/Memo-App/src/frontend/src/components/GlobalErrorHandler.vue"],"sourcesContent":["<template>\n  <v-snackbar\n    v-model=\"show\"\n    :color=\"errorType\"\n    :timeout=\"timeout\"\n    top\n  >\n    {{ errorMessage }}\n    <template v-slot:action=\"{ attrs }\">\n      <v-btn\n        text\n        v-bind=\"attrs\"\n        @click=\"show = false\"\n      >\n        閉じる\n      </v-btn>\n    </template>\n  </v-snackbar>\n</template>\n\n<script>\nimport { ref, computed, watch } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'GlobalErrorHandler',\n  setup() {\n    const store = useStore()\n    const show = ref(false)\n    const timeout = 5000\n\n    const error = computed(() => store.state.error)\n    const errorMessage = computed(() => {\n      if (!error.value) return ''\n      \n      if (error.value.response) {\n        const status = error.value.response.status\n        const message = error.value.response.data.message\n\n        switch (status) {\n          case 400:\n            return '入力内容に誤りがあります'\n          case 401:\n            return '認証に失敗しました。再度ログインしてください'\n          case 403:\n            return 'この操作を実行する権限がありません'\n          case 404:\n            return 'リソースが見つかりません'\n          case 500:\n            return 'サーバーエラーが発生しました'\n          default:\n            return message || 'エラーが発生しました'\n        }\n      }\n\n      return 'エラーが発生しました'\n    })\n\n    const errorType = computed(() => {\n      if (!error.value) return 'error'\n      \n      if (error.value.response) {\n        const status = error.value.response.status\n\n        switch (status) {\n          case 401:\n          case 403:\n            return 'warning'\n          default:\n            return 'error'\n        }\n      }\n\n      return 'error'\n    })\n\n    // エラーが発生したらスナックバーを表示\n    const showError = () => {\n      if (error.value) {\n        show.value = true\n      }\n    }\n\n    // エラーの監視\n    watch(error, showError)\n\n    return {\n      show,\n      timeout,\n      errorMessage,\n      errorType\n    }\n  }\n}\n</script> "],"mappings":"AAqBA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAI,QAAS,KAAI;AACzC,SAASC,QAAO,QAAS,MAAK;AAE9B,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAC1BC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC;IACvB,MAAMI,IAAG,GAAIP,GAAG,CAAC,KAAK;IACtB,MAAMQ,OAAM,GAAI,IAAG;IAEnB,MAAMC,KAAI,GAAIR,QAAQ,CAAC,MAAMK,KAAK,CAACI,KAAK,CAACD,KAAK;IAC9C,MAAME,YAAW,GAAIV,QAAQ,CAAC,MAAM;MAClC,IAAI,CAACQ,KAAK,CAACG,KAAK,EAAE,OAAO,EAAC;MAE1B,IAAIH,KAAK,CAACG,KAAK,CAACC,QAAQ,EAAE;QACxB,MAAMC,MAAK,GAAIL,KAAK,CAACG,KAAK,CAACC,QAAQ,CAACC,MAAK;QACzC,MAAMC,OAAM,GAAIN,KAAK,CAACG,KAAK,CAACC,QAAQ,CAACG,IAAI,CAACD,OAAM;QAEhD,QAAQD,MAAM;UACZ,KAAK,GAAG;YACN,OAAO,cAAa;UACtB,KAAK,GAAG;YACN,OAAO,wBAAuB;UAChC,KAAK,GAAG;YACN,OAAO,mBAAkB;UAC3B,KAAK,GAAG;YACN,OAAO,cAAa;UACtB,KAAK,GAAG;YACN,OAAO,gBAAe;UACxB;YACE,OAAOC,OAAM,IAAK,YAAW;QACjC;MACF;MAEA,OAAO,YAAW;IACpB,CAAC;IAED,MAAME,SAAQ,GAAIhB,QAAQ,CAAC,MAAM;MAC/B,IAAI,CAACQ,KAAK,CAACG,KAAK,EAAE,OAAO,OAAM;MAE/B,IAAIH,KAAK,CAACG,KAAK,CAACC,QAAQ,EAAE;QACxB,MAAMC,MAAK,GAAIL,KAAK,CAACG,KAAK,CAACC,QAAQ,CAACC,MAAK;QAEzC,QAAQA,MAAM;UACZ,KAAK,GAAG;UACR,KAAK,GAAG;YACN,OAAO,SAAQ;UACjB;YACE,OAAO,OAAM;QACjB;MACF;MAEA,OAAO,OAAM;IACf,CAAC;;IAED;IACA,MAAMI,SAAQ,GAAIA,CAAA,KAAM;MACtB,IAAIT,KAAK,CAACG,KAAK,EAAE;QACfL,IAAI,CAACK,KAAI,GAAI,IAAG;MAClB;IACF;;IAEA;IACAV,KAAK,CAACO,KAAK,EAAES,SAAS;IAEtB,OAAO;MACLX,IAAI;MACJC,OAAO;MACPG,YAAY;MACZM;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}