{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: 'MemoEdit',\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const router = useRouter();\n    const memo = ref({\n      title: '',\n      content: '',\n      category: ''\n    });\n    const rules = {\n      required: value => !!value || '必須項目です'\n    };\n    const isNew = computed(() => !route.params.id);\n    const categories = computed(() => store.getters['category/allCategories']);\n    const save = async () => {\n      try {\n        if (isNew.value) {\n          await store.dispatch('memo/createMemo', memo.value);\n        } else {\n          await store.dispatch('memo/updateMemo', {\n            id: route.params.id,\n            ...memo.value\n          });\n        }\n        router.push('/memos');\n      } catch (error) {\n        // エラー処理はグローバルエラーハンドラーで行う\n      }\n    };\n    onMounted(async () => {\n      try {\n        await Promise.all([store.dispatch('category/fetchCategories'), !isNew.value && store.dispatch('memo/fetchMemo', route.params.id)]);\n        if (!isNew.value) {\n          const currentMemo = store.getters['memo/currentMemo'];\n          if (currentMemo) {\n            memo.value = {\n              ...currentMemo\n            };\n          }\n        }\n      } catch (error) {\n        // エラー処理はグローバルエラーハンドラーで行う\n      }\n    });\n    return {\n      memo,\n      rules,\n      isNew,\n      categories,\n      save\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRoute","useRouter","name","setup","store","route","router","memo","title","content","category","rules","required","value","isNew","params","id","categories","getters","save","dispatch","push","error","Promise","all","currentMemo"],"sources":["/Users/dai/Documents/Memo-App/src/frontend/src/views/MemoEdit.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-card>\n          <v-card-title>\n            <span class=\"text-h5\">{{ isNew ? '新規メモ' : 'メモ編集' }}</span>\n          </v-card-title>\n\n          <v-card-text>\n            <v-container>\n              <v-row>\n                <v-col cols=\"12\">\n                  <v-text-field\n                    v-model=\"memo.title\"\n                    label=\"タイトル\"\n                    :rules=\"[rules.required]\"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-textarea\n                    v-model=\"memo.content\"\n                    label=\"内容\"\n                    :rules=\"[rules.required]\"\n                  ></v-textarea>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-select\n                    v-model=\"memo.category\"\n                    :items=\"categories\"\n                    label=\"カテゴリー\"\n                    :rules=\"[rules.required]\"\n                  ></v-select>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-text>\n\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"$router.push('/memos')\"\n            >\n              キャンセル\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"save\"\n            >\n              保存\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default {\n  name: 'MemoEdit',\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    const router = useRouter()\n\n    const memo = ref({\n      title: '',\n      content: '',\n      category: ''\n    })\n\n    const rules = {\n      required: value => !!value || '必須項目です'\n    }\n\n    const isNew = computed(() => !route.params.id)\n    const categories = computed(() => store.getters['category/allCategories'])\n\n    const save = async () => {\n      try {\n        if (isNew.value) {\n          await store.dispatch('memo/createMemo', memo.value)\n        } else {\n          await store.dispatch('memo/updateMemo', {\n            id: route.params.id,\n            ...memo.value\n          })\n        }\n        router.push('/memos')\n      } catch (error) {\n        // エラー処理はグローバルエラーハンドラーで行う\n      }\n    }\n\n    onMounted(async () => {\n      try {\n        await Promise.all([\n          store.dispatch('category/fetchCategories'),\n          !isNew.value && store.dispatch('memo/fetchMemo', route.params.id)\n        ])\n\n        if (!isNew.value) {\n          const currentMemo = store.getters['memo/currentMemo']\n          if (currentMemo) {\n            memo.value = { ...currentMemo }\n          }\n        }\n      } catch (error) {\n        // エラー処理はグローバルエラーハンドラーで行う\n      }\n    })\n\n    return {\n      memo,\n      rules,\n      isNew,\n      categories,\n      save\n    }\n  }\n}\n</script> "],"mappings":"AA8DA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AAC7C,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAW;AAE/C,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC;IACvB,MAAMM,KAAI,GAAIL,QAAQ,CAAC;IACvB,MAAMM,MAAK,GAAIL,SAAS,CAAC;IAEzB,MAAMM,IAAG,GAAIX,GAAG,CAAC;MACfY,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACZ,CAAC;IAED,MAAMC,KAAI,GAAI;MACZC,QAAQ,EAAEC,KAAI,IAAK,CAAC,CAACA,KAAI,IAAK;IAChC;IAEA,MAAMC,KAAI,GAAIjB,QAAQ,CAAC,MAAM,CAACQ,KAAK,CAACU,MAAM,CAACC,EAAE;IAC7C,MAAMC,UAAS,GAAIpB,QAAQ,CAAC,MAAMO,KAAK,CAACc,OAAO,CAAC,wBAAwB,CAAC;IAEzE,MAAMC,IAAG,GAAI,MAAAA,CAAA,KAAY;MACvB,IAAI;QACF,IAAIL,KAAK,CAACD,KAAK,EAAE;UACf,MAAMT,KAAK,CAACgB,QAAQ,CAAC,iBAAiB,EAAEb,IAAI,CAACM,KAAK;QACpD,OAAO;UACL,MAAMT,KAAK,CAACgB,QAAQ,CAAC,iBAAiB,EAAE;YACtCJ,EAAE,EAAEX,KAAK,CAACU,MAAM,CAACC,EAAE;YACnB,GAAGT,IAAI,CAACM;UACV,CAAC;QACH;QACAP,MAAM,CAACe,IAAI,CAAC,QAAQ;MACtB,EAAE,OAAOC,KAAK,EAAE;QACd;MAAA;IAEJ;IAEAxB,SAAS,CAAC,YAAY;MACpB,IAAI;QACF,MAAMyB,OAAO,CAACC,GAAG,CAAC,CAChBpB,KAAK,CAACgB,QAAQ,CAAC,0BAA0B,CAAC,EAC1C,CAACN,KAAK,CAACD,KAAI,IAAKT,KAAK,CAACgB,QAAQ,CAAC,gBAAgB,EAAEf,KAAK,CAACU,MAAM,CAACC,EAAE,EACjE;QAED,IAAI,CAACF,KAAK,CAACD,KAAK,EAAE;UAChB,MAAMY,WAAU,GAAIrB,KAAK,CAACc,OAAO,CAAC,kBAAkB;UACpD,IAAIO,WAAW,EAAE;YACflB,IAAI,CAACM,KAAI,GAAI;cAAE,GAAGY;YAAY;UAChC;QACF;MACF,EAAE,OAAOH,KAAK,EAAE;QACd;MAAA;IAEJ,CAAC;IAED,OAAO;MACLf,IAAI;MACJI,KAAK;MACLG,KAAK;MACLG,UAAU;MACVE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}