{"ast":null,"code":"import _regenerator from \"/Users/dai/Documents/Memo-App/src/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/dai/Documents/Memo-App/src/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'Login',\n  setup: function setup() {\n    var store = useStore();\n    var router = useRouter();\n    var form = ref(null);\n    var email = ref('');\n    var password = ref('');\n    var rules = {\n      required: function required(value) {\n        return !!value || '必須項目です';\n      },\n      email: function email(value) {\n        var pattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return pattern.test(value) || '有効なメールアドレスを入力してください';\n      }\n    };\n    var handleLogin = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var _yield$form$value$val, valid, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return form.value.validate();\n            case 1:\n              _yield$form$value$val = _context.v;\n              valid = _yield$form$value$val.valid;\n              if (!valid) {\n                _context.n = 5;\n                break;\n              }\n              _context.p = 2;\n              _context.n = 3;\n              return store.dispatch('auth/login', {\n                email: email.value,\n                password: password.value\n              });\n            case 3:\n              router.push('/memos');\n              _context.n = 5;\n              break;\n            case 4:\n              _context.p = 4;\n              _t = _context.v;\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[2, 4]]);\n      }));\n      return function handleLogin() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return {\n      email: email,\n      password: password,\n      rules: rules,\n      form: form,\n      handleLogin: handleLogin\n    };\n  }\n};","map":{"version":3,"names":["ref","useStore","useRouter","name","setup","store","router","form","email","password","rules","required","value","pattern","test","handleLogin","_ref","_asyncToGenerator","_regenerator","m","_callee","_yield$form$value$val","valid","_t","w","_context","n","validate","v","p","dispatch","push","a","apply","arguments"],"sources":["/Users/dai/Documents/Memo-App/src/frontend/src/views/Login.vue"],"sourcesContent":["<template>\n  <v-container class=\"fill-height\" fluid>\n    <v-row align=\"center\" justify=\"center\">\n      <v-col cols=\"12\" sm=\"8\" md=\"4\">\n        <v-card class=\"elevation-12\">\n          <v-toolbar color=\"primary\" dark flat>\n            <v-toolbar-title>ログイン</v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-form @submit.prevent=\"handleLogin\" ref=\"form\">\n              <v-text-field\n                v-model=\"email\"\n                label=\"メールアドレス\"\n                name=\"email\"\n                prepend-icon=\"mdi-email\"\n                type=\"email\"\n                :rules=\"[rules.required, rules.email]\"\n              ></v-text-field>\n              <v-text-field\n                v-model=\"password\"\n                label=\"パスワード\"\n                name=\"password\"\n                prepend-icon=\"mdi-lock\"\n                type=\"password\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-form>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" @click=\"handleLogin\">ログイン</v-btn>\n          </v-card-actions>\n          <v-card-text class=\"text-center\">\n            <router-link to=\"/register\">新規登録はこちら</router-link>\n            <br>\n            <router-link to=\"/forgot-password\">パスワードをお忘れの方はこちら</router-link>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'Login',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const form = ref(null)\n\n    const email = ref('')\n    const password = ref('')\n\n    const rules = {\n      required: value => !!value || '必須項目です',\n      email: value => {\n        const pattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n        return pattern.test(value) || '有効なメールアドレスを入力してください'\n      }\n    }\n\n    const handleLogin = async () => {\n      const { valid } = await form.value.validate()\n      \n      if (valid) {\n        try {\n          await store.dispatch('auth/login', {\n            email: email.value,\n            password: password.value\n          })\n          router.push('/memos')\n        } catch (error) {\n          // エラー処理はグローバルエラーハンドラーで行う\n        }\n      }\n    }\n\n    return {\n      email,\n      password,\n      rules,\n      form,\n      handleLogin\n    }\n  }\n}\n</script> "],"mappings":";;;;;AA4CA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AAErC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,KAAI,GAAIJ,QAAQ,CAAC;IACvB,IAAMK,MAAK,GAAIJ,SAAS,CAAC;IACzB,IAAMK,IAAG,GAAIP,GAAG,CAAC,IAAI;IAErB,IAAMQ,KAAI,GAAIR,GAAG,CAAC,EAAE;IACpB,IAAMS,QAAO,GAAIT,GAAG,CAAC,EAAE;IAEvB,IAAMU,KAAI,GAAI;MACZC,QAAQ,EAAE,SAAVA,QAAQA,CAAEC,KAAI;QAAA,OAAK,CAAC,CAACA,KAAI,IAAK,QAAQ;MAAA;MACtCJ,KAAK,EAAE,SAAPA,KAAKA,CAAEI,KAAI,EAAK;QACd,IAAMC,OAAM,GAAI,4BAA2B;QAC3C,OAAOA,OAAO,CAACC,IAAI,CAACF,KAAK,KAAK,qBAAoB;MACpD;IACF;IAEA,IAAMG,WAAU;MAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,YAAA,GAAAC,CAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,qBAAA,EAAAC,KAAA,EAAAC,EAAA;QAAA,OAAAL,YAAA,GAAAM,CAAA,WAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,CAAA;YAAA;cAAAD,QAAA,CAAAC,CAAA;cAAA,OACMnB,IAAI,CAACK,KAAK,CAACe,QAAQ,CAAC;YAAA;cAAAN,qBAAA,GAAAI,QAAA,CAAAG,CAAA;cAApCN,KAAI,GAAAD,qBAAA,CAAJC,KAAI;cAAA,KAERA,KAAK;gBAAAG,QAAA,CAAAC,CAAA;gBAAA;cAAA;cAAAD,QAAA,CAAAI,CAAA;cAAAJ,QAAA,CAAAC,CAAA;cAAA,OAECrB,KAAK,CAACyB,QAAQ,CAAC,YAAY,EAAE;gBACjCtB,KAAK,EAAEA,KAAK,CAACI,KAAK;gBAClBH,QAAQ,EAAEA,QAAQ,CAACG;cACrB,CAAC;YAAA;cACDN,MAAM,CAACyB,IAAI,CAAC,QAAQ;cAAAN,QAAA,CAAAC,CAAA;cAAA;YAAA;cAAAD,QAAA,CAAAI,CAAA;cAAAN,EAAA,GAAAE,QAAA,CAAAG,CAAA;YAAA;cAAA,OAAAH,QAAA,CAAAO,CAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA,CAK1B;MAAA,gBAdML,WAAUA,CAAA;QAAA,OAAAC,IAAA,CAAAiB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAchB;IAEA,OAAO;MACL1B,KAAK,EAALA,KAAK;MACLC,QAAQ,EAARA,QAAQ;MACRC,KAAK,EAALA,KAAK;MACLH,IAAI,EAAJA,IAAI;MACJQ,WAAU,EAAVA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}