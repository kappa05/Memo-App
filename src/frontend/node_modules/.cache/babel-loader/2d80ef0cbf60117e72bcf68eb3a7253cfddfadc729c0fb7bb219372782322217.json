{"ast":null,"code":"import _regenerator from \"/Users/dai/Documents/Memo-App/src/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/dai/Documents/Memo-App/src/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport axios from 'axios';\nvar state = {\n  token: localStorage.getItem('token') || '',\n  user: JSON.parse(localStorage.getItem('user')) || null\n};\nvar getters = {\n  isLoggedIn: function isLoggedIn(state) {\n    return !!state.token;\n  },\n  currentUser: function currentUser(state) {\n    return state.user;\n  },\n  token: function token(state) {\n    return state.token;\n  }\n};\nvar actions = {\n  login: function login(_ref, credentials) {\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var commit, response, _response$data, token, user, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            commit = _ref.commit;\n            _context.p = 1;\n            _context.n = 2;\n            return axios.post('/api/auth/login', credentials);\n          case 2:\n            response = _context.v;\n            _response$data = response.data, token = _response$data.token, user = _response$data.user;\n            localStorage.setItem('token', token);\n            localStorage.setItem('user', JSON.stringify(user));\n            commit('SET_TOKEN', token);\n            commit('SET_USER', user);\n            return _context.a(2, response);\n          case 3:\n            _context.p = 3;\n            _t = _context.v;\n            throw _t;\n          case 4:\n            return _context.a(2);\n        }\n      }, _callee, null, [[1, 3]]);\n    }))();\n  },\n  logout: function logout(_ref2) {\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n      var commit;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.n) {\n          case 0:\n            commit = _ref2.commit;\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            commit('SET_TOKEN', '');\n            commit('SET_USER', null);\n          case 1:\n            return _context2.a(2);\n        }\n      }, _callee2);\n    }))();\n  }\n};\nvar mutations = {\n  SET_TOKEN: function SET_TOKEN(state, token) {\n    state.token = token;\n  },\n  SET_USER: function SET_USER(state, user) {\n    state.user = user;\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"names":["axios","state","token","localStorage","getItem","user","JSON","parse","getters","isLoggedIn","currentUser","actions","login","_ref","credentials","_asyncToGenerator","_regenerator","m","_callee","commit","response","_response$data","_t","w","_context","n","p","post","v","data","setItem","stringify","a","logout","_ref2","_callee2","_context2","removeItem","mutations","SET_TOKEN","SET_USER","namespaced"],"sources":["/Users/dai/Documents/Memo-App/src/frontend/src/store/modules/auth.js"],"sourcesContent":["import axios from 'axios'\n\nconst state = {\n  token: localStorage.getItem('token') || '',\n  user: JSON.parse(localStorage.getItem('user')) || null\n}\n\nconst getters = {\n  isLoggedIn: state => !!state.token,\n  currentUser: state => state.user,\n  token: state => state.token\n}\n\nconst actions = {\n  async login({ commit }, credentials) {\n    try {\n      const response = await axios.post('/api/auth/login', credentials)\n      const { token, user } = response.data\n      \n      localStorage.setItem('token', token)\n      localStorage.setItem('user', JSON.stringify(user))\n      \n      commit('SET_TOKEN', token)\n      commit('SET_USER', user)\n      \n      return response\n    } catch (error) {\n      throw error\n    }\n  },\n\n  async logout({ commit }) {\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    commit('SET_TOKEN', '')\n    commit('SET_USER', null)\n  }\n}\n\nconst mutations = {\n  SET_TOKEN(state, token) {\n    state.token = token\n  },\n  SET_USER(state, user) {\n    state.user = user\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}